{"name":"Pierc-postgresql","tagline":"A python bot that logs IRC channels, and a PHP/JS interface for browsing said logs, using PostgreSQL as the database backend.","body":"### What?\r\n\r\nPierc is an IRC Logbot, paired with a web application for browsing and searching through logs.  The project was adapted from classam's pierc, available at https://github.com/classam/pierc . The original work used MySQL, and I wanted to use PostgreSQL. hence, pierc-postgresql! \r\n\r\nIt is written in Python (for the logger), and PHP & JavaScript (for the client).\r\n\r\n### Why?\r\n\r\nThe ability to review past IRC communication is a feature that is not readily available as a part of many IRC clients. The easiest way to save chat history is to scrape it with a bot. This tool does just that! Additionally, for convenience, the data is saved in a PostgreSQL database. \r\n\r\nThe included viewing client design was done by Curtis Lassam. I simply modified it to work with my bot code focused on PostgreSQL. \r\n\r\nFor your bot-controlling pleasure, there are also the init_script.sh and IRCbot.service files for integration with systemd. \r\n\r\n### Installation\r\n\r\n#### Requirements\r\nPierc-postgresql requires the following to be pre-installed...\r\n\r\n* a web server that can handle PHP and PostgreSQL (Apache with php and php-pgsql was used by the author)\r\n* Python (duh!) and python-psycopg2, which is the python wrapper for interfacing with the database\r\n* An internet connection, registered IRC bot (username, password), and some channel that you want to log!\r\n\r\n#### 1. Create the database\r\nPostgreSQL has a nifty command-line tool called 'createdb' for creating a database. You have to do this as a database-admin user, specified with the -U flag. -W forces the password prompt. dbname is the name of the database you want to create.\r\n\r\n```\r\n$ createdb -U adminusername -W dbname\r\n```\r\n\r\nIf you want to create a IRC bot database user, now would be the time to do so. Be sure to grant it create, temp, and connect privileges. \r\n\r\nNote that if the database will be on a remote server, it will have to be preconfigured for remote access.\r\n\r\n\r\n#### 2. Populate the Database\r\n\r\nThe bot folder contains everything needed to create the main database table and to run the bot. You will need to copy the postgresql_config.txt.example and irc_config.txt.example files into example-less versions. Then, fill in the proper data for each file (irc_config holds the IRC network info and bot login info, while postgresql-config holds the info for the bot to access the database). Be sure to change the file permissions on these to 700 to ensure that only your bot user can read their contents. \r\n\r\nOnce the config files are set up, simply run\r\n```\r\n$ python pierc_db.py\r\n```\r\nto make the database table.\r\n\r\n\r\n### 3. Run the IRC Bot\r\n\r\nOnce the config files and database are set up, simply run\r\n```\r\n$ python pierc.py\r\n```\r\nto start the bot! It will connect to your preferred IRC network and channel and start saving messages to the database. \r\n\r\nIf you are running pierc-postgresql on a remote server (which is highly recommended), you should probably pipe the script output to a file or /dev/null (since the output is simply the IRC chat log).\r\n\r\n\r\n### 4. Installing the IRC Bot into systemd\r\n\r\nIf you use Linux that is based on systemd, the included IRCbot.service and init_script.sh files can be used to set up the bot to run as a service. This means that it can be configured to run on system startup, automatically restarted if the bot quits, and managed using systemctl. \r\n\r\nTo allow for this, you need to copy the .service file into /usr/lib/systemd/system/ (as root or using sudo)\r\n```\r\n# cp /path/to/IRCbot.service /usr/lib/systemd/system/IRCbot.service\r\n```\r\nThen, you can enable and start the service with systemctl\r\n```\r\n# systemctl enable IRCbot\r\n# systemctl start IRCbot\r\n```\r\nThat's it! Your bot will now work as a service. \r\n\r\n\r\n#### 3. Set Up the Web Client\r\n\r\nThe web folder has everything you need to access the IRC logs via a webpage. Simply copy the web folder's contents to a directory accessible by your web server (probably /var/www/IRCbot). Then, you need to do some configuration. Copy the contents of config.php.example to config.php and change the settings accordingly. These settings should mirror those of the bot.\r\n\r\nThat's the last of it! Enjoy!","google":"UA-56709314-1","note":"Don't delete this file! It's used internally to help with page regeneration."}